{% extends "layout.html.twig" %}

{% block title %}Profils{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{{ asset("css/profils.css") }}">
    <style>
        /* Additional styles specific to this template */
    </style>
{% endblock %}

{% block main %}
    <div class="form">

    <h2>{% trans %}Profils{% endtrans %}</h2>

    <p>Pseudo: {{ user.username }}</p>
    <p>Email: {{ user.email }}</p>

    <h1>Changer Pseudo</h1>
    <form action="{{ path('user_profile') }}" method="post">
        <label for="new_username">Nouveau Pseudo: </label>
        <input type="text" id="new_username" name="new_username" required>
        <br>
        <button type="submit" name="change_username" onclick="return confirmUsernameChange();">Changer Pseudo</button>
    </form>

    <h1>Changer Mot de passe</h1>
    <form action="{{ path('user_profile') }}" method="post">
        <label for="old_password">Ancien Mot de passe: </label>
        <input type="password" id="old_password" name="old_password" required>
        <br>
        <label for="new_password">Nouveau Mot de passe: </label>
        <input type="password" id="new_password" name="new_password" required>
        <br>
        <button type="submit" name="change_password" onclick="return confirmPasswordChange();">Changer Mot de passe</button>
    </form>

    <h1>Changer Adresse Email</h1>
    <form action="{{ path('user_profile') }}" method="post">
        <label for="new_email">Nouvelle Adresse Email: </label>
        <input type="email" id="new_email" name="new_email" required>
        <br>
        <button type="submit" name="change_email" onclick="return confirmEmailChange();">Changer Adresse Email</button>
    </form>

    <h1>Supprimer Profil</h1>
    <form action="{{ path('user_profile') }}" method="post" onsubmit="return confirmProfileDeletion();">
        <button type="submit" name="delete_profile">Supprimer Profil</button>
    </form>

    <script>
        function confirmUsernameChange() {
            return confirm("Êtes-vous sûr de vouloir changer votre pseudo?");
        }

        function confirmPasswordChange() {
            return confirm("Êtes-vous sûr de vouloir changer votre mot de passe?");
        }

        function confirmEmailChange() {
            return confirm("Êtes-vous sûr de vouloir changer votre adresse email?");
        }

        function confirmProfileDeletion() {
            return confirm("Êtes-vous sûr de vouloir supprimer votre profil?");
        }
    </script>
    </div>
{% endblock %}

